export interface ParentReport {
    title: string;
    soilName: string;
    analysis: string;
    magicSeason: string;
    drought: string;
    nutrients: string[];
    letter: string;
}

export class ParentClassifier {
    static analyze(scores: { NS: number, HA: number, RD: number, P: number }): ParentReport {
        const { NS, HA, RD, P } = scores;
        const HIGH = 60;
        const LOW = 40;

        // 결과값 초기화 (기본값: 따뜻한 마음)
        let soilName = "따뜻하고 넉넉한 마음";
        let title = "모든 것을 품어주는 여유로운 마음 기질";
        let analysis = "당신의 마음은 주변의 사람들을 따뜻하게 품어주는 넓은 품을 가졌습니다. 조화를 중시하며 타인의 필요를 세심하게 살피는 당신은, 아이에게 가장 든든하고 안전한 세상의 바탕이 됩니다.";
        let magicSeason = "사랑하는 사람들과 정답게 대화를 나누며 따뜻한 온기를 주고받는 모든 순간입니다.";
        let drought = "고립된 느낌을 받거나, 나의 진심이 타인에게 닿지 않는다고 느껴질 때 마음의 에너지가 급격히 소진될 수 있습니다.";
        let nutrients = ["마음이 잘 통하는 친구와의 깊은 대화", "나의 감정을 있는 그대로 기록해보기"];
        let letter = "당신은 이미 존재만으로도 아이에게 큰 위로이자 세계입니다. 타인을 돌보는 그 따뜻한 시선으로, 오늘은 당신의 마음도 꼭 안아주세요.";

        // 상세 기질 조합 로직
        // 1단계: 에너지의 방향 (NS) & 안전의 경계 (HA) 조합으로 기본 기질 결정
        if (NS >= HIGH && HA < HIGH) {
            // 역동적, 열정적, 즉흥적
            soilName = "에너지가 샘솟는 열정적인 마음";
            title = "뜨거운 열정과 생명력이 넘치는 마음 기질";
            analysis = "당신의 마음은 늘 뜨거운 열기와 에너지가 쉼 없이 솟아오르는 역동성을 가졌습니다. 지루함을 거부하고 새로운 세상을 향해 거침없이 발을 내딛는 당신의 모습은 아이에게 신선한 자극과 생동감을 줍니다.";
            magicSeason = "새로운 도전을 앞에 두고 가슴이 설레는 순간, 혹은 낯선 곳에서 나만의 길을 발견할 때 당신은 가장 밝게 회복됩니다.";
            drought = "매일 반복되는 단조로운 일상과 꽉 막힌 규칙은 당신의 열기를 가두어 마음을 몹시 답답하게 만들 수 있습니다.";
            nutrients = ["익숙하지 않은 동네로의 즉흥적인 산책", "평소 해보고 싶었던 이색적인 취미 시작하기"];
            letter = "당신의 넘치는 에너지는 아이의 모험심을 일깨우는 최고의 무기입니다. 가끔은 뜨거워진 마음에 시원한 바람이 지나갈 틈을 내어주어도 괜찮아요.";
        } else if (NS < HIGH && HA >= HIGH) {
            // 신중, 계획적, 안정지향
            soilName = "평온을 지키는 섬세한 마음";
            title = "작은 흔들림도 세밀하게 살피는 신중한 마음 기질";
            analysis = "당신의 마음은 고요함을 사랑하고, 작은 변화도 놓치지 않는 세심한 눈과 신중함을 가졌습니다. 이러한 특성은 아이를 어떤 위험으로부터도 안전하게 지켜내는 가장 든든한 울타리가 됩니다.";
            magicSeason = "모든 것이 계획대로 차분하게 흘러가는 정돈된 시간 속에서 당신은 깊은 평온함과 안정감을 느낍니다.";
            drought = "예측할 수 없는 갑작스러운 변화나 불확실한 상황의 연속은 당신을 극도로 긴장하게 하고 에너지를 소진시킵니다.";
            nutrients = ["나만의 속도로 하루를 기록하는 불렛 저널링", "조용한 곳에서 좋아하는 향기를 맡으며 쉬기"];
            letter = "당신의 신중함은 세상을 향한 깊은 사랑의 다른 이름입니다. 모든 변수를 완벽하게 통제하려 애쓰지 않아도 괜찮아요. 당신은 이미 충분히 안전한 안식처입니다.";
        } else if (NS >= HIGH && HA >= HIGH) {
            // 호기심과 불안의 공존, 섬세한 감각
            soilName = "호기심과 신중함이 공존하는 마음";
            title = "새로움을 갈망하면서도 안전을 살피는 입체적 마음 기질";
            analysis = "당신의 마음은 새로운 세상을 갈망하면서도 한편으로 조심스럽게 자기를 보호하려는 섬세함을 지녔습니다. 남들이 보지 못하는 세밀한 결을 읽어내는 탁월한 감각은 당신을 매우 독창적이고 매력적인 부모로 만듭니다.";
            magicSeason = "나만의 공간에서 창의적인 영감이 떠오를 때, 혹은 아름다운 예술이나 취미를 통해 마음이 영감을 받을 때입니다.";
            drought = "여러 가지 자극이 한꺼번에 몰려와 낯선 선택의 기로에 놓일 때, 당신의 마음은 안개 속에 갇힌 듯 혼란스러울 수 있습니다.";
            nutrients = ["좋아하는 음악을 들으며 손으로 무언가 만들기", "복잡한 생각을 멈추게 하는 단순한 손작업"];
            letter = "모순된 감정들이 교차하는 것은 당신의 내면이 그만큼 풍부하다는 증거입니다. 그 갈등조차 당신만의 독특한 강점이니, 서두르지 말고 당신의 속도로 나아가세요.";
        } else if (NS < LOW && HA < LOW) {
            // 여유, 단순, 평화
            soilName = "흔들림 없는 평온하고 단단한 마음";
            title = "세상사에 일희일비하지 않는 깊고 넓은 마음 기질";
            analysis = "당신의 마음은 어떤 상황에서도 흔들림이 적은 깊고 단단함을 지녔습니다. 사소한 일에 파도치지 않는 묵묵함과 여유로움은 아이가 자신의 속도대로 자라게 조용히 지지해 주는 가장 큰 힘입니다.";
            magicSeason = "아무런 방해 없이 평온한 환경에서, '지금 이 순간'의 휴식을 온전히 누리는 때입니다.";
            drought = "지나치게 복잡한 감정싸움이나 빠른 속도를 요구하는 주변의 계속되는 압박은 당신의 평화에 소음을 일으킵니다.";
            nutrients = ["아무 작업도 하지 않는 완전한 '멍 때리기'", "자연 속에서 산책하며 온전히 현재의 계절 느끼기"];
            letter = "요동치는 세상과 육아의 한가운데서 흔들림 없이 자리를 지키는 당신의 존재는 그 자체로 축복입니다. 무언가 더 열정적이어야 한다고 애쓰지 마세요, 당신은 이미 완벽합니다.";
        }

        // 2단계: modifiers (RD - 사회적 민감성 보정)
        if (RD >= 65) {
            analysis += " 특히 타인의 감정에 깊이 공감하고 정서적으로 단단히 연결될 때 당신의 에너지는 충만해집니다.";
        } else if (RD <= 35) {
            analysis += " 타인의 시선에서 자유롭게, 당신만의 객관적이고 논리적인 원칙을 지킬 때 마음은 더욱 견고해집니다.";
        }

        // 3단계: modifiers (P - 지속성 보정)
        if (P >= 65) {
            title = "흔들림 없이 " + title;
            analysis += " 한 번 마음먹은 일은 끝까지 해내는 당신의 굳건함은 어떠한 고난에도 쉽게 무너지지 않습니다.";
            magicSeason += " 오랜 시간 공들인 일이 마침내 단단한 결과물로 완성되는 순간의 기쁨은 무엇과도 바꿀 수 없습니다.";
        } else if (P <= 35) {
            analysis += " 상황에 따라 유연하게 대처하는 당신의 뛰어난 적응력은 답답한 현실에 다채로운 돌파구를 열어줍니다.";
        }

        return { title, soilName, analysis, magicSeason, drought, nutrients, letter };
    }
}
