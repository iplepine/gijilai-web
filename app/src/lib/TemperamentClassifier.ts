export class TemperamentClassifier {
    static analyze(scores: { NS: number, HA: number, RD: number, P: number }, parentScores: { NS: number, HA: number, RD: number, P: number }) {
        const { NS, HA, RD, P } = scores;
        const highThreshold = 60;
        const lowThreshold = 40;

        // 1. Sprout (Current Manifestation - Child TCI)
        let plant = { label: "ë¬´í•œí•œ ìž ìž¬ë ¥ì˜ ìƒˆì‹¹", emoji: "ðŸŒ±", desc: "ë„ì²˜ì— ì‹¹ì„ í‹”ìš¸ ì¤€ë¹„ê°€ ëœ ìƒëª…ë ¥ ë„˜ì¹˜ëŠ” ìƒíƒœì˜ˆìš”." };

        if (NS >= highThreshold) {
            if (HA >= highThreshold) plant = { label: "ì„¬ì„¸í•œ ì•„í‹°ìŠ¤íŠ¸ ìƒˆì‹¹", emoji: "ðŸŽ¨", desc: "í˜¸ê¸°ì‹¬ì€ ë§Žì§€ë§Œ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ì˜ì—­ì„ ë„“í˜€ê°€ëŠ” ì¤‘ì´ì—ìš”." };
            else if (RD >= highThreshold) plant = { label: "ë‹¤ì •í•œ ë¶„ìœ„ê¸° ë©”ì´ì»¤ ìƒˆì‹¹", emoji: "ðŸ’–", desc: "ì‚¬ëžŒë“¤ì„ í–¥í•´ ì˜¨ê¸°ë¥¼ ì „í•˜ë©° í™œë°œí•˜ê²Œ ìžë¼ê³  ìžˆì–´ìš”." };
            else plant = { label: "ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” íƒí—˜ ìƒˆì‹¹", emoji: "ðŸ¦", desc: "ì •ì›ì„ ì—­ë™ì ìœ¼ë¡œ íƒìƒ‰í•˜ë©° ìƒëª…ë ¥ì„ ë¿œì–´ë‚´ëŠ” ì¤‘ì´ì—ìš”." };
        } else if (HA >= highThreshold) {
            plant = { label: "ì‹ ì¤‘í•œ ê´€ì°°ìž ìƒˆì‹¹", emoji: "ðŸ¦‰", desc: "ì™¸ë¶€ ìžê·¹ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ë©° ìžì‹ ì„ ë³´í˜¸í•˜ê³  ê´€ì°°í•´ìš”." };
        } else if (RD >= highThreshold) {
            plant = { label: "ë”°ëœ»í•œ í‰í™”ì£¼ì˜ìž ìƒˆì‹¹", emoji: "ðŸ•Šï¸", desc: "ëª¨ë‘ì™€ ì¡°í™”ë¡­ê²Œ ì–´ìš°ëŸ¬ì§€ëŠ” ë‹¤ì •í•œ ì•„ì´ì˜ˆìš”." };
        } else if (P >= highThreshold) {
            plant = { label: "ë‹¨ë‹¨í•œ ë…¸ë ¥ê°€ ìƒˆì‹¹", emoji: "ðŸŒ³", desc: "ë¹„ë°”ëžŒì—ë„ í”ë“¤ë¦¬ì§€ ì•Šê³  ë¬µë¬µížˆ ì œ ìžë¦¬ë¥¼ ì§€í‚¤ê³  ìžˆì–´ìš”." };
        }

        // 2. Seed Nature (Innate Nature - Child Proxy for Chess & Thomas)
        let seed = {
            label: "ë‘¥ê·¼ ì”¨ì•—",
            desc: "ì–´ë””ë¡œë“  ìœ ì—°í•˜ê²Œ ì ì‘í•˜ëŠ” ì¡°í™”ë¡œìš´ ì”¨ì•—",
            detail: "ì–´ë””ë¡œë“  ë¶€ë“œëŸ½ê²Œ êµ´ëŸ¬ê°€ ì¡°í™”ë¥¼ ì´ë£° ì¤€ë¹„ê°€ ëœ ì”¨ì•—ì´ì—ìš”. ì„¸ìƒì˜ ë³€í™”ë¥¼ íŽ¸ì•ˆí•œ ê³¡ì„ ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ë¶€ë“œëŸ¬ìš´ ë³¸ì„±ì„ í’ˆê³  ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ í† ì–‘ì„ ë§Œë‚˜ë”ë¼ë„ ì‹¹ì„ í‹”ìš¸ ìˆ˜ ìžˆëŠ” ê¸ì •ì ì¸ ì ì‘ë ¥ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤."
        };
        if (NS >= 65 && HA >= 65) {
            seed = {
                label: "ë¾°ì¡± ì”¨ì•—",
                desc: "ìžê¸°ë§Œì˜ ê²½ê³„ì™€ ê²°ì´ ì„ ëª…í•˜ê²Œ ë¹›ë‚˜ëŠ” ì”¨ì•—",
                detail: "ìžê¸°ë§Œì˜ ê²½ê³„ì™€ ë¹›ê¹”ì´ ì•„ì£¼ ì„ ëª…í•œ ì”¨ì•—ì´ì—ìš”. ê·¸ ë¾°ì¡±í•¨ì€ ì„¸ìƒì„ í–¥í•œ ì˜ˆë¯¼í•œ ì•ˆí…Œë‚˜ì´ë©°, ë³´í˜¸ìžì˜ ì„¸ì‹¬í•œ ì¡°ìœ¨ì´ ë”í•´ì¡Œì„ ë•Œ ê·¸ ëˆ„êµ¬ë„ í‰ë‚´ ë‚¼ ìˆ˜ ì—†ëŠ” ê°€ìž¥ ë…ì°½ì ì´ê³  ì•„ë¦„ë‹¤ìš´ ì—´ë§¤ë¥¼ ë§ºê²Œ ë  ê²ƒìž…ë‹ˆë‹¤."
            };
        } else if (HA >= 60 && NS <= 40) {
            seed = {
                label: "ë‹¨ë‹¨í•œ ì”¨ì•—",
                desc: "ê¸´ í˜¸í¡ìœ¼ë¡œ ë‚´ì‹¤ì„ êµ³ê±´í•˜ê²Œ ì±„ì›Œê°€ëŠ” ì”¨ì•—",
                detail: "ì†ì„ ì‰½ê²Œ ë‚´ì–´ì£¼ì§€ ì•ŠëŠ” ë§Œí¼, ê·¸ ì•ˆì— ì•„ì£¼ ì»¤ë‹¤ëž€ ìž ìž¬ë ¥ì„ ê¾¹ê¾¹ ëˆŒëŸ¬ ë‹´ì€ ì”¨ì•—ì´ì—ìš”. ë°œì•„í•˜ê¸°ê¹Œì§€ ê¸´ ê¸°ë‹¤ë¦¼ê³¼ ì¸ë‚´ê°€ í•„ìš”í•  ìˆ˜ ìžˆì§€ë§Œ, í•œ ë²ˆ ë‚´ë¦° ë¿Œë¦¬ëŠ” ë¹„ë°”ëžŒì—ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” êµ³ê±´í•¨ì„ ë³´ì—¬ì¤„ ê²ƒìž…ë‹ˆë‹¤."
            };
        }

        // 3. Soil Classification (Parent Environment Proxy)
        let soil = {
            label: "ë¹„ì˜¥í•œ ìˆ² í† ì–‘",
            desc: "ì–´ë–¤ ì”¨ì•—ë„ íŽ¸ì•ˆí•˜ê²Œ ë°›ì•„ì£¼ëŠ” ì•ˆì •ì ì¸ ë°”íƒ•",
            detail: "ë³´í˜¸ìžë‹˜ì˜ ë„“ì€ ìˆ˜ìš©ì„±ê³¼ ì•ˆì •ì ì¸ ì •ì„œê°€ í° ê°•ì ì´ì—ìš”. ì•„ì´ê°€ ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë§ˆìŒê» ë¿Œë¦¬ë¥¼ ë»—ì„ ìˆ˜ ìžˆëŠ” ë“ ë“ í•˜ê³  ë”°ëœ»í•œ ì˜ì–‘ë¶„ì„ ì œê³µí•˜ê³  ìžˆìŠµë‹ˆë‹¤."
        };

        if (parentScores.HA >= 60) {
            soil = {
                label: "ë‹¨ë‹¨í•œ ì•”ì„ í† ì–‘",
                desc: "ì”¨ì•—ì„ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ì§€ë§Œ ì„¸ì‹¬í•œ ìœ ì—°í•¨ì´ í•„ìš”í•œ ë°”íƒ•",
                detail: "ì‹ ì¤‘í•¨ê³¼ ì±…ìž„ê°ìœ¼ë¡œ ì•„ì´ë¥¼ ìœ„í—˜ìœ¼ë¡œë¶€í„° ì² ì €ížˆ ë³´í˜¸í•˜ëŠ” ìš¸íƒ€ë¦¬ê°€ ë˜ì–´ì£¼ì„¸ìš”. ë‹¤ë§Œ, ë‹¨ë‹¨í•œ í™ì„ ì¡°ê¸ˆë§Œ ë¶€ë“œëŸ½ê²Œ ì¼êµ¬ì–´ ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ í‹ˆì„ ë¹„ì§‘ê³  ë‚˜ì˜¬ í‹ˆì„ ì£¼ëŠ” ìœ ì—°í•¨ì´ ë”í•´ì§€ë©´ ì¢‹ìŠµë‹ˆë‹¤."
            };
        } else if (parentScores.NS >= 60) {
            soil = {
                label: "ì—­ë™ì ì¸ í™”ì‚° í† ì–‘",
                desc: "ê°•ë ¥í•œ ì—ë„ˆì§€ë¥¼ ì£¼ì§€ë§Œ ì ì ˆí•œ ì™„ê¸‰ ì¡°ì ˆì´ í•„ìš”í•œ ë°”íƒ•",
                detail: "í’ë¶€í•œ ì—ë„ˆì§€ì™€ ì—´ì •ìœ¼ë¡œ ì•„ì´ ì„±ìž¥ì— ê°•ë ¥í•œ ì¶”ì§„ë ¥ì„ ì œê³µí•´ìš”. ëœ¨ê±°ìš´ ì—´ê¸°ê°€ ì•„ì´ì˜ ì—°ì•½í•œ ì‹¹ì„ ì‹œë“¤ê²Œ í•˜ì§€ ì•Šë„ë¡, ê°€ë”ì€ ì‹œì›í•œ ê·¸ëŠ˜ê³¼ ì •ì ì¸ íœ´ì‹ì„ ì„žì–´ì£¼ëŠ” ì™„ê¸‰ ì¡°ì ˆì´ í•µì‹¬ìž…ë‹ˆë‹¤."
            };
        }

        // 4. Harmony Dynamics (Relationship Insight)
        const diffs = [
            { key: 'NS', label: 'ì—ë„ˆì§€ì˜ ì†ë„', diff: Math.abs(NS - parentScores.NS), desc: "ì•„ì´ì˜ ì§ˆì£¼í•˜ë ¤ëŠ” ìžìœ ë¡œì›€ê³¼ ë³´í˜¸ìžë‹˜ì˜ ì‹ ì¤‘í•œ ì œë™ì´ ë§Œë‚˜ëŠ” ì§€ì ì—ì„œ ì •ì›ì˜ ë‹¤ì´ë‚´ë¯¹ì´ ë°œìƒí•©ë‹ˆë‹¤." },
            { key: 'HA', label: 'ì•ˆì „ì˜ ê±°ë¦¬', diff: Math.abs(HA - parentScores.HA), desc: "ì„¸ìƒì„ í–¥í•œ ì•„ì´ì˜ ë°œê±¸ìŒê³¼ ë³´í˜¸ìžë‹˜ì´ ìƒê°í•˜ëŠ” ì•ˆì „í•œ ê²½ê³„ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¡°ìœ¨í•˜ëŠ” ê³¼ì •ì— ìžˆìŠµë‹ˆë‹¤." },
            { key: 'RD', label: 'ë§ˆìŒì˜ ì˜¨ë„', diff: Math.abs(RD - parentScores.RD), desc: "ê°ì •ì„ í‘œí˜„í•˜ê³  ë³´ìƒì„ ì£¼ê³ ë°›ëŠ” ì„œë¡œì˜ ë°©ì‹ì´ ì •ì› ì „ì²´ì˜ ì˜¨ë„ë¥¼ ê²°ì •í•˜ëŠ” ì¤‘ìš”í•œ ì—´ì‡ ê°€ ë©ë‹ˆë‹¤." },
            { key: 'P', label: 'ì„±ì·¨ì˜ í˜¸í¡', diff: Math.abs(P - parentScores.P), desc: "í•œ ê°€ì§€ì— ëª°ìž…í•˜ëŠ” ì•„ì´ì˜ í˜¸í¡ê³¼ ì´ë¥¼ ì§€ì¼œë³´ë©° ì‘ì›í•˜ëŠ” ë³´í˜¸ìžë‹˜ì˜ ë¦¬ë“¬ì´ í•˜ëª¨ë‹ˆë¥¼ ì´ë£¨ì–´ê°€ëŠ” ë‹¨ê³„ìž…ë‹ˆë‹¤." }
        ];
        const majorDiff = diffs.sort((a, b) => b.diff - a.diff)[0];

        return {
            ...plant,
            seed,
            soil,
            harmony: {
                title: majorDiff.label,
                desc: majorDiff.desc,
                score: majorDiff.diff
            }
        };
    }
}
