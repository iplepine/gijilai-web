export class TemperamentClassifier {
    static analyze(scores: { NS: number, HA: number, RD: number, P: number }, parentScores: { NS: number, HA: number, RD: number, P: number }) {
        const { NS, HA, RD, P } = scores;
        const highThreshold = 60;
        const lowThreshold = 40;

        // 1. Current Manifestation - Child TCI
        let plant = { label: "ë¬´í•œí•œ ìž ìž¬ë ¥ì˜ ì•„ì´", emoji: "âœ¨", desc: "ì–¸ì œë“  ìžì‹ ë§Œì˜ ê³ ìœ í•œ ë¹›ì„ ë‚¼ ì¤€ë¹„ê°€ ëœ ìƒíƒœì˜ˆìš”." };

        if (NS >= highThreshold) {
            if (HA >= highThreshold) plant = { label: "ì„¬ì„¸í•œ ì•„í‹°ìŠ¤íŠ¸í˜• ì•„ì´", emoji: "ðŸŽ¨", desc: "í˜¸ê¸°ì‹¬ì€ ë§Žì§€ë§Œ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ì„¸ìƒì„ íƒí—˜í•˜ëŠ” ì¤‘ì´ì—ìš”." };
            else if (RD >= highThreshold) plant = { label: "ë‹¤ì •í•œ ë¶„ìœ„ê¸° ë©”ì´ì»¤í˜• ì•„ì´", emoji: "ðŸ’–", desc: "ì‚¬ëžŒë“¤ì„ í–¥í•´ ì˜¨ê¸°ë¥¼ ì „í•˜ë©° í™œë°œí•˜ê²Œ ìžë¼ê³  ìžˆì–´ìš”." };
            else plant = { label: "ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” íƒí—˜ê°€í˜• ì•„ì´", emoji: "ðŸ¦", desc: "ì„¸ìƒì„ ì—­ë™ì ìœ¼ë¡œ íƒìƒ‰í•˜ë©° ë„˜ì¹˜ëŠ” í˜¸ê¸°ì‹¬ì„ ë¿œì–´ë‚´ëŠ” ì¤‘ì´ì—ìš”." };
        } else if (HA >= highThreshold) {
            plant = { label: "ì‹ ì¤‘í•œ ê´€ì°°ìží˜• ì•„ì´", emoji: "ðŸ¦‰", desc: "ì™¸ë¶€ ìžê·¹ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ë©° ìƒí™©ì„ íŒŒì•…í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ë‹¤ê°€ê°€ìš”." };
        } else if (RD >= highThreshold) {
            plant = { label: "ë”°ëœ»í•œ í‰í™”ì£¼ì˜ìží˜• ì•„ì´", emoji: "ðŸ•Šï¸", desc: "ëª¨ë‘ì™€ ì¡°í™”ë¡­ê²Œ ì–´ìš°ëŸ¬ì§€ë©° ì£¼ë³€ì„ ìž˜ ì‚´í”¼ëŠ” ë‹¤ì •í•œ ì•„ì´ì˜ˆìš”." };
        } else if (P >= highThreshold) {
            plant = { label: "ë‹¨ë‹¨í•œ ë…¸ë ¥ê°€í˜• ì•„ì´", emoji: "â›°ï¸", desc: "ì–´ë ¤ì›€ì—ë„ ì‰½ê²Œ í¬ê¸°í•˜ì§€ ì•Šê³  ë¬µë¬µížˆ ì œ í•  ì¼ì„ í•´ë‚´ê³  ìžˆì–´ìš”." };
        }

        // 2. Innate Nature - Child Proxy
        let seed = {
            label: "ìœ ì—°í•˜ê³  ì¡°í™”ë¡œìš´ ê¸°ì§ˆ",
            desc: "ì–´ë””ë¡œë“  ìœ ì—°í•˜ê²Œ ì ì‘í•˜ëŠ” ì¡°í™”ë¡œìš´ ì•„ì´",
            detail: "ì„¸ìƒì˜ ë³€í™”ë¥¼ íŽ¸ì•ˆí•œ ì„ ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ë¶€ë“œëŸ¬ìš´ ë³¸ì„±ì„ í’ˆê³  ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ í™˜ê²½ì„ ë§Œë‚˜ë”ë¼ë„ ê¸ì •ì ìœ¼ë¡œ ì ì‘í•˜ê³  ì¡°í™”ë¥¼ ì´ë£° ìˆ˜ ìžˆëŠ” ìž ìž¬ë ¥ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤."
        };
        if (NS >= 65 && HA >= 65) {
            seed = {
                label: "ìž…ì²´ì ì´ê³  ì„¬ì„¸í•œ ê¸°ì§ˆ",
                desc: "ìžê¸°ë§Œì˜ ê²½ê³„ì™€ ê²°ì´ ì„ ëª…í•˜ê²Œ ë¹›ë‚˜ëŠ” ì„±í–¥",
                detail: "ìžê¸°ë§Œì˜ ê¸°ì¤€ê³¼ ë¹›ê¹”ì´ ì•„ì£¼ ì„ ëª…í•œ ì•„ì´ì˜ˆìš”. ê·¸ ìž…ì²´ì„±ì€ ì„¸ìƒì„ í–¥í•œ ì˜ˆë¯¼í•˜ê³  ë˜‘ë˜‘í•œ ì•ˆí…Œë‚˜ì´ë©°, ë³´í˜¸ìžì˜ ì„¸ì‹¬í•œ ì¡°ìœ¨ì´ ë”í•´ì¡Œì„ ë•Œ ê°€ìž¥ ë…ì°½ì ì´ê³  ë§¤ë ¥ì ìœ¼ë¡œ ì„±ìž¥í•  ê²ƒìž…ë‹ˆë‹¤."
            };
        } else if (HA >= 60 && NS <= 40) {
            seed = {
                label: "ê¹Šê³  ë‹¨ë‹¨í•œ ê¸°ì§ˆ",
                desc: "ê¸´ í˜¸í¡ìœ¼ë¡œ ë‚´ì‹¤ì„ êµ³ê±´í•˜ê²Œ ì±„ì›Œê°€ëŠ” ì„±í–¥",
                detail: "ì†ì„ ì‰½ê²Œ ë‚´ì–´ì£¼ì§€ ì•ŠëŠ” ë§Œí¼, ê·¸ ì•ˆì— ì•„ì£¼ ì»¤ë‹¤ëž€ ìž ìž¬ë ¥ì„ ê¾¹ê¾¹ ëˆŒëŸ¬ ë‹´ì€ ì•„ì´ì˜ˆìš”. í–‰ë™í•˜ê¸°ê¹Œì§€ ê¸´ ê¸°ë‹¤ë¦¼ê³¼ ì¸ë‚´ê°€ í•„ìš”í•  ìˆ˜ ìžˆì§€ë§Œ, í•œ ë²ˆ ì‹œìž‘í•˜ë©´ ì‰½ê²Œ í¬ê¸°í•˜ì§€ ì•ŠëŠ” êµ³ê±´í•¨ì„ ë³´ì—¬ì¤„ ê²ƒìž…ë‹ˆë‹¤."
            };
        }

        // 3. Environment/Parent Proxy
        let soil = {
            label: "ì—¬ìœ ë¡œìš´ ìˆ˜ìš©ì˜ ë§ˆìŒ",
            desc: "ì–´ë–¤ ì„±í–¥ì˜ ì•„ì´ë„ íŽ¸ì•ˆí•˜ê²Œ ë°›ì•„ì£¼ëŠ” ì•ˆì •ì ì¸ íƒœë„",
            detail: "ë³´í˜¸ìžë‹˜ì˜ ë„“ì€ ìˆ˜ìš©ì„±ê³¼ ì•ˆì •ì ì¸ ì •ì„œê°€ í° ê°•ì ì´ì—ìš”. ì•„ì´ê°€ ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë§ˆìŒê» ë„ì „í•  ìˆ˜ ìžˆëŠ” ë“ ë“ í•˜ê³  ë”°ëœ»í•œ ì§€ì§€ë¥¼ ì œê³µí•˜ê³  ìžˆìŠµë‹ˆë‹¤."
        };

        if (parentScores.HA >= 60) {
            soil = {
                label: "ì‹ ì¤‘í•œ ë³´í˜¸ì˜ ë§ˆìŒ",
                desc: "ì•„ì´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ì§€ë§Œ ìœ ì—°í•¨ì´ í•„ìš”í•œ íƒœë„",
                detail: "ì‹ ì¤‘í•¨ê³¼ ì±…ìž„ê°ìœ¼ë¡œ ì•„ì´ë¥¼ ì•ˆì „í•˜ê²Œ ì§€ì¼œì£¼ëŠ” ìš¸íƒ€ë¦¬ê°€ ë˜ì–´ì£¼ë„¤ìš”. ë‹¤ë§Œ, ë§ˆìŒì† ê±±ì •ì„ ì¡°ê¸ˆ ëœê³  ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ ë¶€ë”ªí˜€ ë³¼ ìˆ˜ ìžˆë„ë¡ ë¶€ë“œëŸ¬ìš´ ì§€ì§€ë¥¼ ë”í•´ì£¼ë©´ ì¢‹ìŠµë‹ˆë‹¤."
            };
        } else if (parentScores.NS >= 60) {
            soil = {
                label: "ì—´ì •ì  ì¶”ì§„ì˜ ë§ˆìŒ",
                desc: "ì•„ì´ì˜ ì„±ìž¥ì„ ê°•í•˜ê²Œ ì´ëŒì§€ë§Œ ì™„ê¸‰ ì¡°ì ˆì´ í•„ìš”í•œ íƒœë„",
                detail: "í’ë¶€í•œ ì—ë„ˆì§€ì™€ ì—´ì •ìœ¼ë¡œ ì•„ì´ ì„±ìž¥ì— í° ìžê·¹ì„ ì œê³µí•´ìš”. ë³´í˜¸ìžë‹˜ì˜ ë¹ ë¥¸ í˜¸í¡ê³¼ ì—´ê¸°ê°€ ìžì¹« ì•„ì´ë¥¼ ë²„ê²ê²Œ í•˜ì§€ ì•Šë„ë¡, ê°€ë”ì€ ì •ì ì¸ íœ´ì‹ì„ ì„žì–´ì£¼ëŠ” ì™„ê¸‰ ì¡°ì ˆì´ í•µì‹¬ìž…ë‹ˆë‹¤."
            };
        }

        // 4. Harmony Dynamics (Relationship Insight)
        const diffs = [
            { key: 'NS', label: 'ì—ë„ˆì§€ì˜ ì†ë„ ì°¨ì´', diff: Math.abs(NS - parentScores.NS), desc: "ì„¸ìƒì„ íƒìƒ‰í•˜ë ¤ëŠ” ì•„ì´ì˜ í˜¸ê¸°ì‹¬ ì†ë„ì™€ ë³´í˜¸ìžë‹˜ì˜ ì†ë„ê°€ ë‹¬ë¼ì„œ ìƒê¸°ëŠ” ë§ˆì°° í˜¹ì€ ì‹œë„ˆì§€ìž…ë‹ˆë‹¤." },
            { key: 'HA', label: 'ì•ˆì „ ê±°ë¦¬ ê°ê°', diff: Math.abs(HA - parentScores.HA), desc: "ì•„ì´ì˜ ë°œê±¸ìŒê³¼ ë³´í˜¸ìžë‹˜ì´ ìƒê°í•˜ëŠ” ì•ˆì „í•œ ê²½ê³„ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¡°ìœ¨í•˜ëŠ” ê³¼ì •ì— ë†“ì—¬ìžˆìŠµë‹ˆë‹¤." },
            { key: 'RD', label: 'ë§ˆìŒì˜ ì˜¨ë„ì°¨', diff: Math.abs(RD - parentScores.RD), desc: "ê°ì •ì„ í‘œí˜„í•˜ê³  ì¹­ì°¬ê³¼ ë³´ìƒì„ ì£¼ê³ ë°›ëŠ” ì„œë¡œì˜ ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì„¸ì‹¬í•œ í†µì—­ì´ í•„ìš”í•©ë‹ˆë‹¤." },
            { key: 'P', label: 'ì„±ì·¨ì˜ í˜¸í¡', diff: Math.abs(P - parentScores.P), desc: "í•œ ê°€ì§€ì— ëª°ìž…í•˜ëŠ” ì•„ì´ì˜ í˜¸í¡ê³¼ ì´ë¥¼ ê¸°ë‹¤ë ¤ì£¼ëŠ” ë³´í˜¸ìžë‹˜ì˜ ë¦¬ë“¬ ì°¨ì´ë¥¼ ë§žì¶”ì–´ê°€ëŠ” ë‹¨ê³„ìž…ë‹ˆë‹¤." }
        ];
        const majorDiff = diffs.sort((a, b) => b.diff - a.diff)[0];

        return {
            ...plant,
            seed,
            soil,
            harmony: {
                title: majorDiff.label,
                desc: majorDiff.desc,
                score: majorDiff.diff
            }
        };
    }
}
