# 마음 통역소 (육아 고민 상담 및 액션 관리)

## 1. 개요 (Overview)

**'마음 통역소'**는 부모가 겪고 있는 현재의 육아 고민을 입력하면, 아이와 양육자의 '마음 기질' 데이터를 기반으로 원인을 분석하고 즉각적으로 실천 가능한 맞춤형 처방을 내려주는 초개인화 상담 기능입니다.

*   **핵심 철학**: 모호한 위로 대신 정확한 기질적 원인 규명
*   **지향점**: 양육자가 길게 글을 쓰지 않아도 클릭 몇 번으로 핵심 갈등을 파악하는 '상황-반응 매핑형' 하이브리드 UX
*   **결과물**: 단발성 텍스트 조언이 아닌, 홈 화면과 연동되어 지속 실천 가능한 **'액션 아이템(Action Item)'** 구축

---

## 2. 상담 플로우 (Consultation Flow)

### Step 1. 고민 접수 (Problem Input)
사용자가 현재 가장 힘든 고민 카테고리를 선택하거나 세부 상황을 입력합니다.
*   **추천 카테고리 칩 UI 제공**: 
    *   `[외출 전 떼쓰기]`, `[식사 거부]`, `[수면 거부/지연]`, `[장난감/동생 갈등]`, `[공공장소 통제 불능]`, `[분리 불안]`, `[직접 입력]`
*   **상세 입력창 (Optional)**: 카테고리 선택 후 발생한 상황을 자유롭게 1~2줄로 추가 설명할 수 있습니다.

### Step 2. AI 대응 지문 생성 (AI Context Gathering)
사용자의 고민을 받은 AI가 즉시 답변을 주지 않고, **양육자의 대응 방식**을 묻는 3~4개의 객관식 선택지를 실시간으로 생성하여 질문합니다.
*   **목적**: 아이의 문제 행동에 불을 지핀 '양육자의 트리거'를 객관적으로 파악하기 위함입니다.
*   **UX 동작**: 고민 제출 후 1~2초 내에 화면 하단에 객관식 질문 카드가 나타납니다.

### Step 3. 양육자 대응 선택 (Reaction Selection)
양육자는 제시된 3~4개의 보기 중 자신이 실제로 했던 행동과 가장 가까운 것을 선택합니다.

### Step 4. 마음 처방전 발급 (Solution Generation)
[아이 기질] + [양육자 기질] + [고민 상황] + [양육자 대응 방식] 등 4가지 변수를 종합하여 초개인화된 분석 리포트를 발급합니다.
1.  **아이의 속마음 통역**: 기질에 기반한 진짜 이유.
2.  **우리들의 케미스트리 분석**: 양육자의 대응이 왜 아이 기질과 마찰을 일으켰는지 설명.
3.  **마법의 한마디**: 갈등을 즉각적으로 잠재울 스크립트.
4.  **액션 아이템 제안**: 반복 실천할 수 있는 구체적인 과제.

---

## 3. 각 단계별 AI 프롬프트 설계

### 프롬프트 A: 양육자 대응 방식 객관식 생성 (Step 2)
사용자의 고민을 바탕으로 4가지의 전형적인 부모 대응 패턴(강압형, 회유형, 논리설득형, 방임/당황형)을 생성합니다.

```markdown
**[System Prompt: Generate Caregiver Reactions]**
당신은 아동 심리와 기질을 전문적으로 분석하는 육아 상담가입니다.
사용자(양육자)가 현재 겪고 있는 육아 고민 상황을 입력했습니다. 이 상황에서 대한민국 부모들이 흔히 하는 대처 방식 4가지를 객관식 보기로 만들어주세요.

**[Input Data]**
- 고민 상황: {user_problem_input} // 예: 아침에 옷을 안 입겠다고 짜증내고 숨어버려요.

**[Output Format (JSON)]**
{
  "question": "양육자님, 이런 상황일 때 주로 어떻게 대처하셨나요?",
  "options": [
    { "id": "A", "type": "AUTHORITARIAN", "text": "시간이 없으니 강하게 호통치거나 억지로 입혔다." },
    { "id": "B", "type": "PERMISSIVE", "text": "좋아하는 간식이나 영상을 보여주며 회유했다." },
    { "id": "C", "type": "LOGICAL", "text": "왜 이 옷을 입어야 하는지 차분하게 이유를 설명했다." },
    { "id": "D", "type": "AVOIDANT", "text": "어떻게 해야 할지 당황스러워서 일단 아이가 진정할 때까지 기다렸다." }
  ]
}
```

### 프롬프트 B: 기질 맞춤 처방전 생성 (Step 4)
선택된 대응 방식과 두 사람의 기질 데이터를 분석하여 처방전을 작성합니다.

```markdown
**[System Prompt: Generate Mind Prescription]**
당신은 기질(TCI) 기반의 족집게 양육 코치입니다.
아이의 기질과 양육자의 기질, 그리고 양육자의 대처 방식을 분석하여 왜 둘 사이에 마찰이 생겼는지 설명하고 실천 가능한 솔루션을 제공하세요.

**[Input Data]**
- 아이 기질: {child_tci_archetype} (예: 호기심 많고 주도적인 탐험가형, NS High)
- 양육자 기질: {parent_tci_archetype} (예: 섬세하고 단단한 방패, HA High)
- 고민 상황: {user_problem_input}
- 양육자 대처: {selected_reaction_text} (예: 시간이 없으니 억지로 입혔다)

**[Output Format]**
1. [아이의 속마음 통역] 
- 아이의 기질적 특성을 바탕으로 이 행동이 왜 나왔는지 2~3줄로 설명 (예: 탐험가형 아이는 통제권이 뺏겼다고 느껴서 저항합니다).
2. [우리의 케미스트리] 
- 아이 기질과 양육자의 대처 방식이 왜 충돌했는지 설명 (부모를 탓하지 말고 기질 간의 마찰로 설명할 것).
3. [마법의 한마디] 
- 갈등 상황에서 즉시 사용할 수 있는 대화 스크립트 1개 (쌍따옴표로 제공).
4. [데일리 액션 아이템] 
- 이 문제를 해결하기 위해 부모가 오늘 당장 실천할 수 있는 작고 구체적인 행동 1개 제시 (예: 아이에게 선택지 2개 주기).
```

---

## 4. 액션 아이템 기반 솔루션 관리 (Action Item Management)

도출된 솔루션이 일회성 위로로 끝나지 않고 부모의 태도 변화로 이어지도록 관리 시스템을 설계합니다.

### 4.1 데이터 모델링 (Schema Overview)
*   `Consultations`: 부모가 남긴 고민과 AI의 답변 내역 아카이빙 테이블.
*   `ActionItems`: AI가 제안해 준 '데일리 액션 아이템'을 관리하는 테이블.

### 4.2 액션 아이템 생애주기 (Life Cycle)

1.  **수집 (Collection)**
    *   마음 통역소에서 상담이 끝난 후, 하단에 나오는 `[이 액션을 내 미션으로 등록하기]` 버튼을 클릭.
2.  **홈 대시보드 연동 (Dashboard Integration)**
    *   등록된 액션 아이템은 홈 화면의 **'데일리 미션 카드'**로 나타납니다.
    *   *예시: "오늘 아이가 고집을 부릴 때, [마법의 한마디]를 사용하여 선택지 2가지를 제안해 보세요."*
3.  **실천 및 트래킹 (Tracking)**
    *   양육자가 하루 끝에 미션 완료 체크(✅)를 하면 포인트/이펙트가 부여되고 미션이 사라집니다.
4.  **회고 (Retrospective)**
    *   `마음 약국(아카이브)` 탭에서 내가 과거에 등록했던 고민과 실천했던 액션 히스토리를 모아볼 수 있습니다.
    *   비슷한 고민이 재발했을 때 과거의 처방전을 빠르게 다시 열람할 수 있습니다.

---

## 5. 기대 효과 (Impact)
*   **고관여 확보**: 수동적으로 결과를 읽는 1회성 테스트 앱에서 벗어나, 매일 발생하는 육아 고민을 해결하기 위해 수시로 방문하는 **유틸리티 플랫폼**으로 진화합니다.
*   **데이터의 선순환**: 사용자가 입력한 구체적인 고민 카테고리와 대응 방식은 향후 맞춤형 추천 알고리즘을 고도화하는 소중한 자산이 됩니다.
*   **프리미엄 전환 허들 낮춤**: 무료 또는 990원 단건 결제로 이 '마음 통역소'를 경험하게 한 뒤, 일주일/한 달 단위의 정기 코칭 패키지(구독)로 유도하기 좋은 강력한 미끼 상품(Hook)이 됩니다.
